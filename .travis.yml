sudo: required

services:
    -docker
    
matrix:
    include:
    - name: Client Web
    
before_script:
  - "export PHANTOMJS_EXECUTABLE='phantomjs --local-to-remote-url-access=yes --ignore-ssl-errors=yes'"
  - "export DISPLAY=:99.0"
 
before_install:
    - docker build -t estefaduque-webapp-test -f Dockerfile.test .

script: 
    - docker run -e CI=true estefaduque-webapp-test

before-deploy:
    -docker  build -t estefaduque-webapp .

deploy:
    skip_cleanup: true
    provider: script
    script: bash ./deploy.sh
    on:
        branch: master
